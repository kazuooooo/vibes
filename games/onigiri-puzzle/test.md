# おにぎりパズル – テストケース

## E2Eテスト項目

### 1. 初期表示テスト

#### TC001: ゲーム画面の初期表示
- **テスト内容**: ゲーム画面が正しく表示される
- **前提条件**: ブラウザでindex.htmlを開く
- **実行手順**:
  1. ブラウザでゲームページにアクセス
  2. 画面の表示を確認
- **期待結果**:
  - タイトル「おにぎりパズル」が表示される
  - 8×8のゲームグリッドが表示される
  - 制限時間（60秒）が表示される
  - 現在得点（0点）が表示される
  - 作成済みおにぎり数（0個）が表示される

#### TC002: 初期グリッドの具材配置
- **テスト内容**: 初期状態でグリッドに具材が適切に配置される
- **前提条件**: ゲーム画面が表示されている
- **実行手順**:
  1. ゲームグリッドの内容を確認
- **期待結果**:
  - 8×8の全てのセルに具材が配置されている
  - 7種類の具材（米、海苔、梅、鮭、昆布、ツナマヨ、明太子）が含まれている
  - 初期状態で3つ以上連続するマッチは存在しない

### 2. 基本操作テスト

#### TC003: 具材の選択
- **テスト内容**: 具材をクリック/タップで選択できる
- **前提条件**: ゲーム画面が表示されている
- **実行手順**:
  1. 任意の具材をクリック
  2. 選択状態を確認
- **期待結果**:
  - クリックした具材が選択状態になる（ハイライト表示）
  - 他の具材の選択は解除される

#### TC004: 具材の交換
- **テスト内容**: 隣接する具材と交換できる
- **前提条件**: 1つの具材が選択されている
- **実行手順**:
  1. 選択済み具材の隣接セル（上下左右）をクリック
  2. 交換処理を確認
- **期待結果**:
  - 2つの具材の位置が入れ替わる
  - 交換アニメーションが表示される
  - 選択状態が解除される

#### TC005: 無効な交換の拒否
- **テスト内容**: 隣接しない具材との交換は実行されない
- **前提条件**: 1つの具材が選択されている
- **実行手順**:
  1. 選択済み具材から離れた位置の具材をクリック
- **期待結果**:
  - 具材の交換は実行されない
  - 新しくクリックした具材が選択状態になる

### 3. マッチング機能テスト

#### TC006: 3マッチの検出と消去
- **テスト内容**: 3つ以上の同じ具材が並んだ時に消去される
- **前提条件**: ゲームが開始されている
- **実行手順**:
  1. 具材を交換して3つ以上の同じ具材を縦または横に並べる
  2. マッチ処理を確認
- **期待結果**:
  - マッチした具材が消去アニメーション後に消える
  - 得点が加算される（3マッチ=100点）
  - 上部の具材が落下する

#### TC007: 4マッチのボーナス得点
- **テスト内容**: 4つの具材がマッチした時の得点計算
- **前提条件**: ゲームが開始されている
- **実行手順**:
  1. 4つの同じ具材を縦または横に並べる
- **期待結果**:
  - 4マッチボーナス（200点）が加算される
  - マッチした具材が消去される

#### TC008: 5マッチ以上のボーナス得点
- **テスト内容**: 5つ以上の具材がマッチした時の得点計算
- **前提条件**: ゲームが開始されている
- **実行手順**:
  1. 5つ以上の同じ具材を縦または横に並べる
- **期待結果**:
  - 5マッチ以上ボーナス（500点）が加算される
  - マッチした具材が消去される

### 4. 落下・補充システムテスト

#### TC009: 具材の落下処理
- **テスト内容**: 具材が消去された後、上部の具材が正しく落下する
- **前提条件**: マッチが発生して具材が消去された
- **実行手順**:
  1. マッチ消去後の落下アニメーションを観察
- **期待結果**:
  - 空いたスペースに上部の具材が落下する
  - 落下アニメーションが滑らかに表示される
  - グリッドに空きセルが残らない

#### TC010: 新規具材の補充
- **テスト内容**: 上部から新しい具材が補充される
- **前提条件**: 具材の落下処理が完了した
- **実行手順**:
  1. グリッド上部の新規具材補充を確認
- **期待結果**:
  - 空いた上部セルに新しい具材が出現する
  - 7種類の具材からランダムに選択される
  - 8×8グリッドが完全に埋まる

### 5. 連鎖システムテスト

#### TC011: 2連鎖の発生
- **テスト内容**: 落下により新たなマッチが発生する連鎖
- **前提条件**: ゲームが開始されている
- **実行手順**:
  1. マッチを作って具材を消去
  2. 落下後に新たなマッチが発生することを確認
- **期待結果**:
  - 2回目のマッチが自動的に処理される
  - 連鎖ボーナス（1.5倍）が適用される
  - 連鎖カウンターが表示される

#### TC012: 3連鎖以上の発生
- **テスト内容**: 複数回の連鎖が発生する
- **前提条件**: ゲームが開始されている
- **実行手順**:
  1. 連鎖が続くような配置を作る
  2. 3回以上の連鎖を確認
- **期待結果**:
  - 3連鎖で2倍、4連鎖以上で3倍のボーナスが適用される
  - 各連鎖でアニメーション効果が表示される

### 6. おにぎり完成システムテスト

#### TC013: 基本おにぎりの完成
- **テスト内容**: 米3個+具材1個+海苔1個でおにぎりが完成する
- **前提条件**: ゲームが開始されている
- **実行手順**:
  1. 米を3個マッチさせる
  2. その後具材（梅、鮭、昆布など）を1個マッチさせる
  3. 最後に海苔を1個マッチさせる
- **期待結果**:
  - おにぎり完成のアニメーションが表示される
  - 1000点のボーナス得点が加算される
  - 作成済みおにぎり数が1増加する
  - 完成記録が画面に表示される

#### TC014: 複数おにぎりの同時完成
- **テスト内容**: 1回の操作で複数のおにぎりが完成する
- **前提条件**: 複数のおにぎり完成条件が整っている
- **実行手順**:
  1. 1回の具材交換で複数のおにぎり完成条件を満たす
- **期待結果**:
  - 同時完成ボーナス（+1000点/個）が追加される
  - 特別なエフェクトが表示される

### 7. 特殊効果テスト

#### TC015: 梅干しの爆破効果
- **テスト内容**: 梅干しマッチで3×3範囲が爆破される
- **前提条件**: 梅干しがマッチ可能な配置になっている
- **実行手順**:
  1. 梅干し3個をマッチさせる
  2. 爆破効果の発動を確認
- **期待結果**:
  - マッチした梅干し周囲3×3の具材が消去される
  - 爆破エフェクトが表示される
  - 特殊効果ボーナス（+500点）が加算される

#### TC016: 鮭のライン消去効果
- **テスト内容**: 鮭マッチで1ライン全体が消去される
- **前提条件**: 鮭がマッチ可能な配置になっている
- **実行手順**:
  1. 鮭3個をマッチさせる
  2. ライン消去効果の発動を確認
- **期待結果**:
  - マッチした鮭の縦または横ライン全体が消去される
  - ライン消去エフェクトが表示される
  - 特殊効果ボーナス（+500点）が加算される

#### TC017: 昆布の同種消去効果
- **テスト内容**: 昆布マッチで同じ種類の具材がすべて消去される
- **前提条件**: 昆布がマッチ可能な配置になっている
- **実行手順**:
  1. 昆布3個をマッチさせる
  2. 同種消去効果の発動を確認
- **期待結果**:
  - グリッド上の昆布がすべて消去される
  - 同種消去エフェクトが表示される
  - 特殊効果ボーナス（+500点）が加算される

#### TC018: 明太子の得点2倍効果
- **テスト内容**: 明太子マッチで2ターンの間得点が2倍になる
- **前提条件**: 明太子がマッチ可能な配置になっている
- **実行手順**:
  1. 明太子3個をマッチさせる
  2. 効果時間中に他の具材をマッチさせる
  3. 得点倍率を確認
- **期待結果**:
  - 2ターンの間、全ての得点が2倍になる
  - 効果時間中は画面に倍率表示
  - 効果終了時にアニメーションで通知

### 8. タイマー機能テスト

#### TC019: 制限時間のカウントダウン
- **テスト内容**: 60秒のタイマーが正しくカウントダウンされる
- **前提条件**: ゲームが開始されている
- **実行手順**:
  1. ゲーム開始から時間の経過を観察
  2. タイマー表示を確認
- **期待結果**:
  - 60秒から0秒まで正確にカウントダウンされる
  - 残り10秒以下で警告表示（色の変更など）
  - タイマー表示が見やすい位置にある

#### TC020: タイムアップ時の処理
- **テスト内容**: 制限時間終了時にゲームが終了する
- **前提条件**: タイマーが0秒に近づいている
- **実行手順**:
  1. タイマーが0秒になるまで待つ
  2. ゲーム終了処理を確認
- **期待結果**:
  - タイマー0秒でゲームが自動終了
  - 結果画面に遷移
  - 最終得点、おにぎり数、連鎖記録が表示される

### 9. UI/UX テスト

#### TC021: レスポンシブデザイン（デスクトップ）
- **テスト内容**: デスクトップ画面での表示確認
- **前提条件**: 1024px以上の画面サイズ
- **実行手順**:
  1. デスクトップブラウザでゲームを開く
  2. レイアウトを確認
- **期待結果**:
  - 8×8グリッドが中央に適切に配置される
  - サイドパネルが右側に表示される
  - すべてのUI要素が見やすく配置される

#### TC022: レスポンシブデザイン（タブレット）
- **テスト内容**: タブレット画面での表示確認
- **前提条件**: 768px-1023pxの画面サイズ
- **実行手順**:
  1. タブレットまたはブラウザリサイズで確認
  2. レイアウト調整を確認
- **期待結果**:
  - グリッドサイズが画面に最適化される
  - サイドパネルが下部に移動する
  - タッチ操作に適したボタンサイズ

#### TC023: レスポンシブデザイン（モバイル）
- **テスト内容**: スマートフォン画面での表示確認
- **前提条件**: 767px以下の画面サイズ
- **実行手順**:
  1. スマートフォンまたはブラウザリサイズで確認
  2. モバイル最適化を確認
- **期待結果**:
  - グリッドが画面幅に収まる
  - UI要素がコンパクトに再配置
  - 指での操作がしやすいサイズ

### 10. 操作系テスト

#### TC024: マウス操作（PC）
- **テスト内容**: マウスでの具材選択・交換操作
- **前提条件**: PC環境でゲーム表示
- **実行手順**:
  1. マウスクリックで具材を選択
  2. ドラッグで具材を交換
  3. 操作レスポンスを確認
- **期待結果**:
  - クリック反応が100ms以内
  - ドラッグ操作が滑らか
  - ホバー効果が表示される

#### TC025: タッチ操作（モバイル）
- **テスト内容**: タッチでの具材選択・交換操作
- **前提条件**: タッチ対応デバイス
- **実行手順**:
  1. タップで具材を選択
  2. スワイプで具材を交換
  3. 操作レスポンスを確認
- **期待結果**:
  - タップ反応が100ms以内
  - スワイプ操作が認識される
  - 誤タップ防止機能が動作

### 11. パフォーマンステスト

#### TC026: フレームレート維持
- **テスト内容**: ゲーム中のフレームレートが安定している
- **前提条件**: ゲームが動作中
- **実行手順**:
  1. 連続的に具材交換とマッチを実行
  2. アニメーション中のフレームレートを観察
- **期待結果**:
  - 60fps を維持
  - アニメーションが滑らか
  - 操作ラグが発生しない

#### TC027: メモリ使用量
- **テスト内容**: 長時間プレイでのメモリリークがない
- **前提条件**: ゲームを継続プレイ
- **実行手順**:
  1. 複数回ゲームを連続プレイ
  2. ブラウザの開発者ツールでメモリ使用量を監視
- **期待結果**:
  - メモリ使用量が100MB以下
  - 時間経過でメモリが増加し続けない
  - ガベージコレクションが正常動作

### 12. エラーハンドリングテスト

#### TC028: 無効操作の処理
- **テスト内容**: 無効な操作に対する適切な処理
- **前提条件**: ゲームが動作中
- **実行手順**:
  1. グリッド外をクリック
  2. アニメーション中に操作
  3. 連続クリック
- **期待結果**:
  - エラーが発生しない
  - ゲームが続行可能
  - 適切なフィードバックが提供

#### TC029: ブラウザリサイズ対応
- **テスト内容**: プレイ中のブラウザリサイズに対応
- **前提条件**: ゲームプレイ中
- **実行手順**:
  1. ゲーム中にブラウザウィンドウをリサイズ
  2. レイアウト調整を確認
- **期待結果**:
  - ゲームが中断されない
  - レイアウトが適切に再調整される
  - データが保持される

### 13. アクセシビリティテスト

#### TC030: キーボード操作
- **テスト内容**: キーボードのみでのゲーム操作
- **前提条件**: キーボード操作環境
- **実行手順**:
  1. Tabキーでフォーカス移動
  2. 矢印キーで具材選択
  3. Enterキーで具材交換
- **期待結果**:
  - 全機能がキーボードで操作可能
  - フォーカス表示が明確
  - 操作方法が直感的

#### TC031: スクリーンリーダー対応
- **テスト内容**: 視覚障害者向け支援技術での利用
- **前提条件**: スクリーンリーダー環境
- **実行手順**:
  1. スクリーンリーダーでページを読み上げ
  2. 各要素の認識を確認
- **期待結果**:
  - 適切なARIAラベルが設定
  - ゲーム状況が音声で理解可能
  - 操作可能な要素が認識される