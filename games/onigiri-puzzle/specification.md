# おにぎりパズル – 仕様書

## 概要

「おにぎりパズル」は、様々な具材と形を揃えておにぎりを作るマッチ3系パズルゲームです。  
プレイヤーは制限時間内にできるだけ多くのおにぎりを完成させ、特殊効果を活用して高得点を狙います。

---

## ゲームのルール

1. **基本ルール**
   - 8×8のグリッド上に様々な具材（おにぎりパーツ）が配置される
   - 隣接する同じ具材を3つ以上縦または横に並べるとマッチして消える
   - マッチした具材は上から落下して空いたスペースを埋める
   - 新しい具材が上から補充される

2. **おにぎり完成条件**
   - 米（白）3個 + 具材（梅、鮭、昆布など）1個 + 海苔（黒）1個の組み合わせでおにぎりが完成
   - 完成したおにぎりは得点として加算され、ボーナス効果が発動

3. **制限時間**
   - 1ゲーム60秒の時間制限
   - 残り時間は画面上部に表示

4. **特殊効果システム**
   - **梅干し**: 周囲3×3の範囲を爆破して消去
   - **鮭**: 縦または横の1ライン全体を消去
   - **昆布**: 同じ種類の具材をすべて消去
   - **ツナマヨ**: 隣接する具材を別の種類に変換
   - **明太子**: 2ターンの間、得点が2倍になる

5. **連鎖システム**
   - マッチによって落下した具材が新たなマッチを作ると連鎖発生
   - 連鎖回数に応じて得点倍率がアップ

---

## 基本仕様

| 項目 | 内容 |
|------|------|
| タイトル | おにぎりパズル |
| プラットフォーム | Web（PC / モバイル対応） |
| 使用技術 | HTML / CSS / JavaScript（Reactなども可） |
| プレイ時間 | 60秒/1ゲーム |
| グリッドサイズ | 8×8 |
| 具材の種類 | 7種類（米、梅、鮭、昆布、ツナマヨ、明太子、海苔） |

---

## 具材の種類と効果

### 基本具材

| 具材 | アイコン | 効果 | 出現頻度 |
|------|----------|------|----------|
| 米 | ⚪ | おにぎりの基本素材 | 高 |
| 海苔 | ⚫ | おにぎりの包み材 | 中 |
| 梅干し | 🔴 | 3×3範囲爆破 | 中 |
| 鮭 | 🟠 | 1ライン消去 | 中 |
| 昆布 | 🟤 | 同種消去 | 低 |
| ツナマヨ | 🟡 | 隣接変換 | 低 |
| 明太子 | 🔶 | 得点2倍効果 | 最低 |

### 特殊パーツ
- **レインボー具材**: どの具材ともマッチ可能
- **ボム具材**: マッチすると周囲を爆破
- **タイム具材**: マッチすると制限時間+5秒

---

## 得点システム

### 基本得点
| アクション | 得点 |
|------------|------|
| 3マッチ | 100点 |
| 4マッチ | 200点 |
| 5マッチ以上 | 500点 |
| おにぎり完成 | 1000点 |

### ボーナス得点
| ボーナス種類 | 倍率/追加点 |
|--------------|-------------|
| 連鎖×2 | 1.5倍 |
| 連鎖×3 | 2倍 |
| 連鎖×4以上 | 3倍 |
| 特殊効果発動 | +500点 |
| 同時複数おにぎり完成 | +1000点/個 |

---

## 画面構成

### メイン画面
- **ヘッダー**
  - ゲームタイトル
  - 現在得点
  - 残り時間
  - 作成済みおにぎり数

- **ゲームボード**
  - 8×8のグリッド表示
  - 具材アイコンの配置
  - マッチ時のアニメーション効果

- **サイドパネル**
  - 次回発動予定の特殊効果
  - 現在の連鎖カウンター
  - おにぎり完成プログレス

- **フッター**
  - ポーズボタン
  - リスタートボタン
  - ヘルプボタン

### 結果画面
- 最終得点表示
- 作成したおにぎり数
- 最大連鎖数
- ランキング表示（S/A/B/C/D）
- 「もう一度プレイ」ボタン

---

## ゲームフロー

1. **開始画面**
   - タイトル表示
   - プレイボタン
   - ルール説明ボタン

2. **ゲーム準備**
   - 初期グリッド生成
   - 60秒タイマー開始

3. **メインゲームループ**
   - プレイヤーの具材選択・交換
   - マッチ判定とアニメーション
   - 落下処理と新規具材生成
   - 特殊効果の発動
   - 得点計算と表示更新

4. **ゲーム終了**
   - タイムアップまたは手動終了
   - 結果画面への遷移
   - スコア保存

---

## 操作方法

### PC操作
- **マウスクリック**: 具材を選択
- **ドラッグ**: 具材を隣接位置と交換
- **キーボード**: 矢印キーで選択、Enterで交換

### モバイル操作
- **タップ**: 具材を選択
- **スワイプ**: 具材を隣接位置と交換
- **ピンチ**: ズーム機能（オプション）

---

## ビジュアル仕様

### カラーパレット
- **背景**: 温かい和風ベージュ（#F5F0E8）
- **グリッド**: 薄いブラウン（#D4C4A8）
- **UI要素**: 深緑（#2D5016）
- **強調色**: 赤（#CC0000）、オレンジ（#FF6600）

### アニメーション
- **マッチ消去**: フェードアウト + スケール縮小
- **落下**: イージングありの滑らか落下
- **特殊効果**: 派手な爆発・光のエフェクト
- **おにぎり完成**: 弾むアニメーション + キラキラ効果

### フォント
- **日本語**: Noto Sans JP
- **数字**: モノスペースフォント
- **タイトル**: 毛筆風フォント（オプション）

---

## レスポンシブ対応

### デスクトップ（1024px以上）
- 8×8グリッドを中央配置
- サイドパネルを右側に表示
- マウス操作に最適化

### タブレット（768px-1023px）
- グリッドサイズを調整
- サイドパネルを下部に配置
- タッチ操作に配慮したボタンサイズ

### モバイル（767px以下）
- グリッドを画面幅に合わせて最適化
- UI要素をコンパクトに再配置
- スワイプジェスチャーを重視

---

## 拡張機能（将来実装）

### ゲームモード
- **エンドレスモード**: 時間制限なしの無限プレイ
- **チャレンジモード**: 特定条件クリアを目指す
- **マルチプレイ**: オンライン対戦機能

### カスタマイズ
- **テーマ変更**: 季節限定の背景・具材
- **難易度設定**: グリッドサイズや制限時間の調整
- **アクセシビリティ**: 色覚サポート、音声案内

### ソーシャル機能
- **スコア共有**: SNSへの結果投稿
- **ランキング**: グローバル・フレンドランキング
- **実績システム**: 各種アチーブメント

---

## パフォーマンス要件

- **FPS**: 60fps維持
- **レスポンス時間**: タッチ/クリック反応100ms以内
- **メモリ使用量**: 100MB以下
- **ネットワーク**: オフラインプレイ対応

---

## アクセシビリティ

- **キーボード操作**: 全機能をキーボードで操作可能
- **スクリーンリーダー**: 適切なARIAラベル設定
- **色覚サポート**: 形状やパターンでの区別も提供
- **文字サイズ**: ユーザー設定に応じた拡大対応