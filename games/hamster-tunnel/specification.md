# ハムスタートンネル – 仕様書

## 概要

「ハムスタートンネル」は、プレイヤーがマウスクリックでトンネルを掘り、かわいいハムスターをスタート地点からゴール地点まで導くパズルゲームです。  
単純な操作ながらも戦略性があり、短時間で何度も楽しめるカジュアルゲームです。

---

## ゲームのルール

1. プレイヤーは、グリッド状のフィールド上でマウスクリックしてトンネルを掘る。
2. ハムスターは左上のスタート地点から右下のゴール地点を目指す。
3. ハムスターは掘られたトンネル（空いたマス）のみを通ることができる。
4. ハムスターは上下左右の4方向に移動でき、最短経路でゴールを目指す。
5. プレイヤーはハムスターが移動を開始する前にトンネルを掘る必要がある。
6. ハムスターがゴールに到達するとレベルクリア。
7. 制限時間内にクリアできないとゲームオーバー。
8. レベルが上がるごとに、フィールドサイズが大きくなったり、障害物が増えたりする。

---

## 基本仕様

| 項目 | 内容 |
|------|------|
| タイトル | ハムスタートンネル |
| プラットフォーム | Web（PC / モバイル対応） |
| 使用技術 | HTML / CSS / JavaScript（Reactなども可） |
| プレイ時間 | 1〜3分（1ゲームあたり） |
| UI構成 | ゲームフィールド、レベル表示、スコア表示、タイマー、スタート/リトライボタン |
| 難易度調整 | レベルが上がるごとにフィールドサイズや障害物が増加 |

---

## レベル・スコア仕様

| レベル | フィールドサイズ | 制限時間 | 基本スコア |
|--------|------------------|----------|------------|
| 1 | 5×5 | 30秒 | 100点 |
| 2 | 6×6 | 35秒 | 200点 |
| 3 | 7×7 | 40秒 | 300点 |
| 4 | 8×8 | 45秒 | 400点 |
| 5+ | 9×9以上 | 50秒+ | レベル × 100点 |

- 残り時間によるボーナス（残り時間 × 10点）
- 最小トンネル数でのクリアボーナス（最短経路達成で+500点）
- ゲームオーバー時に合計スコアを表示

---

## 画面構成

- **ヘッダー**
  - タイトル表示
  - 現在レベル表示
  - 現在スコア表示
  - 制限時間表示
- **メインビュー**
  - ゲームフィールド（グリッド状のマス）
  - ハムスター（キャラクター）
  - スタート地点（左上角）
  - ゴール地点（右下角）
- **コントロール**
  - スタートボタン
  - リトライボタン（ゲームオーバー時）
- **状態表示**
  - 現在の状態（「トンネルを掘ってください」「ハムスター移動中」「クリア！」「ゲームオーバー」）

---

## ゲームフロー

1. **初期状態**: スタートボタンが表示される
2. **トンネル掘りフェーズ**: 「トンネルを掘ってください」メッセージと共にフィールドがクリック可能になる
3. **ハムスター移動フェーズ**: スタートボタンクリック後、ハムスターが自動で移動開始
4. **結果判定**: 
   - ゴール到達 → 「クリア！」表示 → 次レベルへ
   - 時間切れ or 経路なし → 「ゲームオーバー」表示 → リトライボタン表示

---

## フィールド仕様

- **マスの種類**
  - 土ブロック（茶色、クリックで掘れる）
  - トンネル（白色、ハムスターが通れる）
  - ハムスター（黄色の丸、アニメーション付き）
  - スタート地点（緑色、常に空いている）
  - ゴール地点（赤色、常に空いている）

- **ハムスターの移動**
  - 移動速度：1マス/500ms
  - 移動方向：上下左右の4方向
  - 経路探索：最短経路（A*アルゴリズムまたはBFS）
  - アニメーション：滑らかな移動表現

---

## 操作仕様

- **PC操作**
  - マウスクリック：マスをクリックしてトンネルを掘る
  - スタートボタン：ハムスターの移動開始
  - リトライボタン：ゲームリスタート

- **モバイル操作**
  - タップ：マスをタップしてトンネルを掘る
  - タップしやすいサイズ（最小44px）

---

## 拡張アイデア（将来的な実装）

- パワーアップアイテム（移動速度アップ、時間延長など）
- 障害物の追加（動く壁、一方通行など）
- ハムスターの種類選択（見た目の変更）
- サウンド効果（掘る音、移動音、クリア音）
- ランキング機能（ローカル or オンライン）
- ヒント機能（最短経路のガイド表示）

---

## テスト計画（E2E）

- フィールドが正しく描画されるか
- マスのクリックでトンネルが掘れるか
- ハムスターが正しい経路で移動するか
- ゴール到達時にレベルクリアになるか
- 制限時間切れでゲームオーバーになるか
- スコア計算が正しく行われるか
- リトライ機能が正常に動作するか
- モバイル端末でタッチ操作が正常に動作するか