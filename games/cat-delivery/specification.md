# ネコの宅配便 – 仕様書

## 概要

「ネコの宅配便」は、自転車に乗った猫の配達員となって障害物を避けながら荷物を時間内に届けるカジュアルゲームです。  
配達ルートの選択や速度調整がスコアに直結する、判断力と反応速度を要求するゲームです。

---

## ゲームのルール

1. プレイヤーは自転車に乗った猫の配達員として荷物を配達する
2. 画面上部から下部に向かって道路が流れ、猫は左右に移動可能
3. 障害物（車、工事現場、穴など）を避けながら進む
4. 荷物をピックアップし、目的地まで配達する
5. 障害物に当たると体力が減り、体力が0になるとゲームオーバー
6. 制限時間内により多くの荷物を配達してスコアを稼ぐ
7. 配達成功時は距離と時間に応じてスコアボーナス

---

## 基本仕様

| 項目 | 内容 |
|------|------|
| タイトル | ネコの宅配便 |
| プラットフォーム | Web（PC / モバイル対応） |
| 使用技術 | HTML / CSS / JavaScript（Reactなども可） |
| プレイ時間 | 120秒（1ゲームあたり） |
| UI構成 | 道路エリア、猫キャラクター、体力バー、スコア表示、タイマー、荷物カウンター |
| 障害物の種類 | 車、工事現場、穴、木、信号機（5種類） |

---

## スコア・ペナルティ仕様

### 基本スコア
- 荷物配達成功: 200点
- 距離ボーナス: 配達距離 × 10点
- 時間ボーナス: 素早い配達（30秒以内）で +100点
- パーフェクト配達（無傷で配達）: +50点

### ペナルティ
- 障害物に衝突: -1体力、-20点
- 荷物を落とす: -50点
- 配達時間超過（60秒以上）: -30点

### 体力システム
- 初期体力: 3
- 障害物衝突で体力-1
- 体力0でゲームオーバー
- 荷物配達成功で体力+1（最大5まで）

---

## 画面構成

- **ヘッダー**
  - タイトル表示
  - 残り時間表示（カウントダウン）
  - 現在スコア表示
  - 体力表示（ハートアイコン）
- **道路エリア**
  - 上から下に流れる道路
  - 猫キャラクター（左右移動可能）
  - 障害物（上から下に流れる）
  - 荷物（ピックアップポイント）
  - 配達先（ゴールポイント）
- **コントロール**
  - スタートボタン
  - リトライボタン（ゲーム終了時）
  - 左右移動ボタン（モバイル用）
- **状態表示**
  - 現在の状態（「準備中」「配達中」「ゲーム終了」）
  - 配達済み荷物数
  - 最終スコア（ゲーム終了時）

---

## ゲームフロー

1. **初期状態**: スタートボタンが表示される
2. **ゲーム開始**: 120秒のカウントダウン開始、猫が道路上に出現
3. **配達フェーズ**: 
   - 荷物をピックアップ
   - 障害物を避けながら配達先へ
   - 配達完了で新しい荷物が出現
4. **ゲーム終了**: 時間切れまたは体力0で終了、最終スコア表示

---

## キャラクター・オブジェクト仕様

### 猫キャラクター
- サイズ: 40x60px
- 移動速度: キーボード/タッチで左右移動
- 位置: 画面下部1/3あたり
- アニメーション: 自転車をこぐモーション

### 障害物の種類と特徴
| 障害物 | サイズ | 特徴 | 出現頻度 |
|--------|--------|------|----------|
| 車 | 60x100px | 普通の速度で流れる | 高 |
| 工事現場 | 80x80px | 幅が広く避けにくい | 中 |
| 穴 | 40x40px | 小さいが見つけにくい | 中 |
| 木 | 50x120px | 縦に長い | 低 |
| 信号機 | 30x150px | 細いが高い | 低 |

### 荷物システム
- 荷物サイズ: 30x30px
- ピックアップ: 猫が触れると自動取得
- 配達先: 画面上に大きく表示される目印
- 配達距離: ピックアップ地点から配達先までの距離で計算

---

## アニメーション・UI仕様

### 道路のアニメーション
- 流れる速度: 一定（CSS transformまたはJSアニメーション）
- 背景: 道路の白線が上から下に流れる効果
- 障害物: 道路と同じ速度で上から下に移動

### フィードバック
- 配達成功: 「+200」などの得点表示 + 緑色のエフェクト
- 衝突時: 画面が赤く点滅 + 振動エフェクト
- 荷物取得: キラキラエフェクト + 取得音

### レスポンシブ対応
- モバイル: タッチ操作ボタン表示、スワイプ移動対応
- PC: キーボード（左右矢印キー、A/Dキー）対応
- 画面サイズに応じたレイアウト調整

---

## 技術仕様

### DOM構造
```html
<div id="game-container">
  <header>
    <div id="timer">時間: 120</div>
    <div id="score">スコア: 0</div>
    <div id="health">❤️❤️❤️</div>
    <div id="packages">荷物: 0</div>
  </header>
  <div id="road-area">
    <div id="cat-player"></div>
    <!-- 障害物・荷物・配達先がここに出現 -->
  </div>
  <div id="controls">
    <button id="start-btn">スタート</button>
    <button id="retry-btn">リトライ</button>
    <div id="mobile-controls">
      <button id="left-btn">←</button>
      <button id="right-btn">→</button>
    </div>
  </div>
</div>
```

### ゲーム状態管理
- ゲーム状態: 'ready', 'playing', 'finished'
- スコア管理: 基本点 + ボーナス - ペナルティ
- タイマー管理: 120秒カウントダウン
- 障害物管理: 流れる障害物の生成・移動・削除・衝突判定
- 荷物管理: ピックアップ・配達システム

---

## 拡張アイデア（将来的な実装）

- 難易度選択（道路の流れる速度、障害物密度調整）
- 特殊アイテム（スピードアップ、無敵時間など）
- サウンドエフェクト（配達音、衝突音、BGM）
- ランキング機能（ローカルストレージ）
- アチーブメント（連続配達記録、パーフェクト配達など）

---

## テスト計画（E2E）

- ゲーム開始・終了の流れが正常か
- 猫キャラクターの移動が正しく動作するか
- 障害物の衝突判定が正確か
- 荷物のピックアップ・配達システムが正しいか
- スコア計算（基本点、ボーナス、ペナルティ）が正しいか
- タイマーが正常に動作するか
- 体力システムが正しく機能するか
- レスポンシブレイアウトが適切か