# ズボン上げマスター – 落ちるズボンを防ぐ 仕様書

## 概要

「ズボン上げマスター」は、プレイヤーが画面上で落ちそうなズボンを素早く上げて防ぐ、反射神経とタイミングが求められるカジュアルゲームです。  
ズボンが落ちる前にクリック（またはタップ）して上げることで、キャラクターの恥ずかしい思いを防ぎます。

---

## ゲームのルール

1. プレイヤーは画面上のキャラクターのズボンが落ちそうになるのを見守る。
2. ズボンが落ちそうになったら、素早くキャラクターをクリック（またはタップ）してズボンを上げる。
3. タイミングよくズボンを上げることができればポイント獲得。
4. ズボンが完全に落ちてしまうとライフが減る。
5. 時間が経つにつれて、ズボンが落ちる頻度が増加する。
6. ライフが0になるとゲームオーバー。
7. どれだけ多くのズボンを上げることができるかを競う。

---

## 基本仕様

| 項目 | 内容 |
|------|------|
| タイトル | ズボン上げマスター – 落ちるズボンを防ぐ |
| プラットフォーム | Web（PC / モバイル対応） |
| 使用技術 | HTML / CSS / JavaScript |
| プレイ時間 | 1〜3分（1ゲームあたり） |
| UI構成 | キャラクター表示エリア、スコア表示、ライフ表示、スタート/リトライボタン |
| 難易度調整 | 時間経過とともにズボンが落ちる頻度が増加 |

---

## スコア・ライフ仕様

| 項目 | 内容 |
|------|------|
| 初期ライフ | 3 |
| ズボンを上げた時のスコア | 10点 |
| パーフェクトタイミング | 20点（ズボンが落ちる直前でのクリック） |
| ライフ減少 | ズボンが完全に落ちると-1 |
| コンボボーナス | 連続成功で追加ポイント（連続数 × 5点） |

---

## 画面構成

- **ヘッダー**
  - タイトル表示
  - 現在スコア表示
  - ライフ表示（ハート×3）
- **メインビュー**
  - キャラクター表示エリア（中央の大きな表示部分）
  - ズボンの状態を視覚的に表示
- **コントロール**
  - スタートボタン
  - リトライボタン（ゲームオーバー時）
- **状態表示**
  - 現在の状態（「準備中」「ゲーム中」「ゲームオーバー」）
  - コンボ数表示

---

## ゲームフロー

1. **初期状態**: スタートボタンが表示される
2. **ゲーム開始**: キャラクターが表示され、ズボンが落ちるイベントが開始
3. **ズボン落下イベント**: 
   - ズボンが徐々に下がり始める
   - プレイヤーがクリック/タップしてズボンを上げる
   - 成功すればスコア獲得、失敗すればライフ減少
4. **ゲーム継続**: 次のズボン落下イベントまで短い間隔
5. **ゲームオーバー**: ライフが0になったらゲーム終了、リトライボタン表示

---

## ズボン落下仕様

### 落下パターン

- **警告フェーズ**: ズボンが少し下がり始める（1秒間）
- **危険フェーズ**: ズボンがさらに下がる（0.5秒間）
- **落下フェーズ**: ズボンが完全に落ちる（0.3秒間）

### タイミング判定

- **パーフェクト**: 危険フェーズの後半でクリック（20点）
- **グッド**: 危険フェーズの前半でクリック（10点）
- **早すぎ**: 警告フェーズでクリック（5点）
- **失敗**: 落下フェーズまでクリックしない（ライフ-1）

### 難易度調整

| 時間 | ズボン落下間隔 | 落下速度 |
|------|----------------|----------|
| 0-30秒 | 3-5秒 | 標準 |
| 30-60秒 | 2-4秒 | 1.2倍 |
| 60-90秒 | 1.5-3秒 | 1.5倍 |
| 90秒以上 | 1-2秒 | 2倍 |

---

## 視覚効果

- **キャラクター**: シンプルな棒人間スタイル
- **ズボン**: 青色の矩形で表現、落下状態に応じて位置が変化
- **アニメーション**: ズボンの落下と引き上げをスムーズに表現
- **エフェクト**: 
  - ズボンを上げた時のキラキラエフェクト
  - パーフェクトタイミング時の特別エフェクト
  - ライフ減少時の警告エフェクト

---

## 音響効果（オプション）

- ズボンを上げた時の効果音
- パーフェクトタイミング時の特別音
- ライフ減少時の警告音
- ゲームオーバー音

---

## 拡張アイデア（将来的な実装）

- 複数キャラクター同時管理
- 特殊アイテム（ベルト、サスペンダーなど）
- ランキング機能（ローカル or オンライン）
- 難易度選択（Easy, Normal, Hard）
- キャラクターカスタマイズ機能

---

## テスト計画（E2E）

- ズボンの落下タイミングが正しく動作するか
- プレイヤーのクリック/タップが正しく認識されるか
- スコア計算が適切に行われるか
- ライフシステムが正常に動作するか
- ゲームオーバー時にリトライ機能が正常に動作するか
- モバイル端末でタッチ操作が正常に動作するか
- 難易度調整が時間経過とともに正しく適用されるか