# リズム忍者 – 仕様書

## 概要

「リズム忍者」は、音楽のリズムに合わせて斬撃やジャンプを行う音楽リズムゲームです。  
プレイヤーは忍者となり、流れる音楽のビートに合わせて適切なタイミングで行動を起こし、敵を倒していきます。
ミスをすると敵の攻撃を受け、曲のテンポが徐々に上がっていく緊張感のあるゲームです。

---

## ゲームのルール

1. 画面に表示される忍者キャラクターを操作する
2. 音楽のビートに合わせて「斬撃」または「ジャンプ」のアクションを選択
3. 正確なタイミングで行動すると敵を倒し、スコアを獲得
4. タイミングがずれると敵の攻撃を受け、HPが減少
5. HPが0になるとゲームオーバー
6. 時間が経過すると曲のテンポ（BPM）が徐々に上昇
7. より長く生き残り、高スコアを目指す

---

## 基本仕様

| 項目 | 内容 |
|------|------|
| タイトル | リズム忍者 |
| プラットフォーム | Web（PC / モバイル対応） |
| 使用技術 | HTML / CSS / JavaScript（Reactなども可） |
| プレイ時間 | 2〜5分（1ゲームあたり） |
| UI構成 | 忍者キャラクター、敵キャラクター、アクションボタン（斬撃/ジャンプ）、HP表示、スコア表示、BPM表示 |
| 音楽 | シンプルなビート音またはBGM |

---

## ゲームメカニクス

### アクション仕様
- **斬撃**: 地上の敵を倒すアクション（スペースキーまたは斬撃ボタン）
- **ジャンプ**: 空中の敵を避けるまたは踏みつけるアクション（上矢印キーまたはジャンプボタン）

### タイミング判定
- **Perfect**: ビートの±100ms以内 → スコア×2
- **Good**: ビートの±200ms以内 → 通常スコア
- **Miss**: 上記以外 → ダメージを受ける（HP-1）

### 敵の出現パターン
- 地上敵：斬撃で倒す
- 空中敵：ジャンプで避ける or 踏みつけ
- ビートのタイミングで敵が攻撃態勢に入る
- プレイヤーが適切に行動しないとダメージ

---

## スコアシステム

| 判定 | 基本スコア | ボーナス |
|------|------------|----------|
| Perfect | 100点 | コンボ倍率適用 |
| Good | 50点 | コンボ継続 |
| Miss | 0点 | コンボリセット |

- **コンボシステム**: 連続成功でスコア倍率が上昇（最大×5）
- **テンポボーナス**: 高BPMでの成功に追加ボーナス

---

## 難易度調整

### BPM（テンポ）変化
- 開始BPM: 80
- 最大BPM: 160
- 30秒ごとに+10 BPM

### HP・ライフシステム
- 初期HP: 3
- 最大HP: 3
- Miss時にHP-1
- HP0でゲームオーバー

---

## 画面構成

- **ヘッダー**
  - スコア表示
  - HP表示（❤️で視覚化）
  - 現在BPM表示
- **メインビュー**
  - 忍者キャラクター（中央下）
  - 敵キャラクター（左右から出現）
  - ビートインジケーター（リズムガイド）
- **コントロール**
  - 斬撃ボタン
  - ジャンプボタン
- **状態表示**
  - 判定結果（Perfect/Good/Miss）
  - コンボ数表示

---

## ゲームフロー

1. **スタート画面**: ゲーム説明とスタートボタン
2. **カウントダウン**: 3-2-1でゲーム開始準備
3. **メインゲーム**: 音楽再生開始、敵の出現開始
4. **ゲームオーバー**: HPが0になった時点
5. **リザルト画面**: 最終スコア、最高コンボ、プレイ時間表示

---

## 音響仕様

- **メトロノーム**: 基本ビートを刻む音
- **効果音**: 
  - 斬撃音（成功時）
  - ジャンプ音（成功時）
  - ダメージ音（失敗時）
  - コンボ音（連続成功時）
- **BGM**: シンプルなループ音楽（オプション）

---

## ビジュアル仕様

### キャラクター
- **忍者**: シンプルな忍者の2Dスプライト
- **敵**: 基本的な敵キャラクター（地上用・空中用）
- **エフェクト**: 攻撃エフェクト、ダメージエフェクト

### UI
- **ビートインジケーター**: リズムに合わせて点滅する視覚ガイド
- **判定表示**: Perfect/Good/Missのテキスト表示
- **HP**: ハートアイコンでの視覚化

---

## 拡張アイデア（将来的な実装）

- 複数の楽曲選択
- パワーアップアイテム
- ボス敵の登場
- オンラインランキング
- 様々な忍術（追加アクション）
- ストーリーモード

---

## テスト計画（E2E）

- 音楽のビートに合わせた敵の出現タイミング
- キーボード・タッチ操作の正確な入力認識
- タイミング判定の精度（Perfect/Good/Miss）
- スコア計算とコンボシステムの動作
- BPM変化による難易度上昇
- HP管理とゲームオーバー条件
- モバイル端末での操作性
- 音声とビジュアルの同期