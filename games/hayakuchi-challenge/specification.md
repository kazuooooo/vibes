# 早口言葉チャレンジ – 仕様書

## 概要

「早口言葉チャレンジ」は、プレイヤーが早口言葉を正確かつ迅速に発音し、Web Speech API（音声認識）によって判定されるカジュアルゲームです。
集中力と発音スキルが求められ、短時間で楽しめるユニークな音声インタラクションゲームです。

---

## ゲームのルール

1. プレイヤーは、画面に表示された早口言葉を読み上げる。
2. マイクボタンを押して音声認識を开始する。
3. 制限時間内に早口言葉を正確に発音する。
4. 音声認識エンジンが発音の正確性を判定する。
5. 正確に発音できれば次のレベル（より難しい早口言葉）に進む。
6. 時間内に正確に発音できなければゲームオーバー。
7. 連続で何レベルクリアできるかを競う。

---

## 基本仕様

| 項目 | 内容 |
|------|------|
| タイトル | 早口言葉チャレンジ |
| プラットフォーム | Web（PC / モバイル対応） |
| 使用技術 | HTML / CSS / JavaScript + Web Speech API |
| プレイ時間 | 1〜5分（1ゲームあたり） |
| UI構成 | 早口言葉表示エリア、マイクボタン、レベル表示、スコア表示、制限時間表示、スタート/リトライボタン |
| 難易度調整 | レベルが上がるごとに早口言葉の難易度が上昇、制限時間が短縮 |

---

## レベル・スコア仕様

| レベル | 早口言葉 | 制限時間 | スコア |
|--------|----------|----------|--------|
| 1 | 生麦生米生卵 | 5秒 | 100点 |
| 2 | 隣の客はよく柿食う客だ | 6秒 | 200点 |
| 3 | 東京特許許可局 | 4秒 | 300点 |
| 4 | 赤巻紙青巻紙黄巻紙 | 5秒 | 400点 |
| 5 | 坊主が屏風に上手に坊主の絵を描いた | 8秒 | 500点 |
| 6 | 新進シャンソン歌手総出演新春シャンソンショー | 10秒 | 600点 |
| 7 | 庭には二羽鶏がいる | 4秒 | 700点 |
| 8 | 青は藍より出でて藍より青し | 6秒 | 800点 |
| 9 | 右目右耳右肩 | 3秒 | 900点 |
| 10 | 竹垣に竹立てかけたのは竹立てかけたかったから竹立てかけた | 12秒 | 1000点 |

- ゲームオーバー時に合計スコアを表示
- 完璧クリア（認識率100%）でボーナス（+50点）
- 時間ボーナス（残り時間 × 10点）

---

## 画面構成

- **ヘッダー**
  - タイトル表示
  - 現在レベル表示
  - 現在スコア表示
- **メインビュー**
  - 早口言葉表示エリア（中央の大きな表示部分）
  - 制限時間表示
  - マイクボタン（音声認識開始/停止）
  - 認識結果表示エリア
- **コントロール**
  - スタートボタン
  - リトライボタン（ゲームオーバー時）
- **状態表示**
  - 現在の状態（「準備完了」「挑戦してください」「認識中...」「正解！」「ゲームオーバー」）

---

## ゲームフロー

1. **初期状態**: スタートボタンが表示される
2. **チャレンジ準備**: 早口言葉が表示され、「挑戦してください」メッセージが表示
3. **音声認識フェーズ**: マイクボタンクリックで音声認識開始、制限時間内に発音
4. **判定**: 
   - 正解 → 「正解！」表示 → 次レベルへ
   - 不正解・時間切れ → 「ゲームオーバー」表示 → リトライボタン表示

---

## 音声認識仕様

- **使用API**: Web Speech API (SpeechRecognition)
- **言語設定**: 日本語 (ja-JP)
- **認識精度**: 類似度70%以上で正解
- **ノイズ対策**: continuous: false, interimResults: false
- **フォールバック**: 音声認識が使用できない場合はテキスト入力フォームを表示

---

## UI/UX仕様

- **視覚フィードバック**: 
  - マイクボタンは音声認識中にアニメーション
  - 制限時間は残り3秒でカウントダウン表示
  - 認識中は音声波形エフェクト表示
- **アクセシビリティ**:
  - 大きな文字で早口言葉を表示
  - 明確な状態表示
  - 音声認識が利用できない場合の代替手段
- **レスポンシブ対応**: 
  - モバイル端末でも快適にプレイ可能
  - タッチしやすい大きなマイクボタン

---

## 拡張アイデア（将来的な実装）

- 難易度選択（制限時間の調整）
- 録音・再生機能（自分の発音を確認）
- ランキング機能（ローカル or オンライン）
- カスタム早口言葉の追加機能
- 発音分析とフィードバック機能
- 音声認識精度の調整機能

---

## テスト計画（E2E）

- 早口言葉が正しく表示されるか
- マイクボタンで音声認識が開始されるか
- 制限時間が正しくカウントダウンされるか
- 音声認識結果が適切に判定されるか
- レベルアップ時にスコアが正しく計算されるか
- ゲームオーバー時にリトライ機能が正常に動作するか
- 音声認識が使用できない環境での代替手段が動作するか
- モバイル端末でマイク操作が正常に動作するか

---

## 技術的考慮事項

- **ブラウザ対応**: Chrome, Firefox, Safari, Edge
- **HTTPS必須**: Web Speech APIはHTTPS環境でのみ動作
- **プライバシー**: マイク権限の適切な取得と説明
- **パフォーマンス**: 認識処理中のUI応答性維持
- **エラーハンドリング**: ネットワークエラー、マイクアクセス拒否等の適切な処理