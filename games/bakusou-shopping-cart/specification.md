# 爆走ショッピングカート – 仕様書

## 概要

「爆走ショッピングカート」は、プレイヤーがスーパーマーケットのショッピングカートに乗って直線コースを疾走するアクションゲームです。  
アイテムを取ってスピードアップしたり、障害物を避けて減速を防いだり、コースの端から落下しないように注意深く操作する必要があります。

---

## ゲームのルール

1. プレイヤーはショッピングカートを左右に操作して直線コースを走行する
2. コース上にはスピードアップアイテム（食品など）と障害物（他のカート、商品棚など）が配置される
3. アイテムを取るとスピードが上がり、スコアが増加する
4. 障害物に当たるとスピードが下がり、一時的に操作が困難になる
5. コースの左右端から落下するとゲームオーバー
6. できるだけ長い距離を走行し、高スコアを目指す
7. スピードが0になった場合もゲームオーバー

---

## 基本仕様

| 項目 | 内容 |
|------|------|
| タイトル | 爆走ショッピングカート |
| プラットフォーム | Web（PC / モバイル対応） |
| 使用技術 | HTML / CSS / JavaScript |
| プレイ時間 | 1〜3分（1ゲームあたり） |
| UI構成 | ゲームエリア、スコア表示、スピード表示、スタート/リスタートボタン、操作説明 |
| コントロール | PC：A/Dキー または 左右矢印キー、モバイル：画面タッチ |

---

## ゲーム要素

### プレイヤー（ショッピングカート）
- 初期スピード：中程度
- 左右移動速度：適度（素早すぎず遅すぎず）
- サイズ：コース幅の約1/8程度
- 見た目：ショッピングカートのアイコンまたは単純な図形

### コース
- 幅：プレイヤーが左右に動き回れる適度な幅
- 長さ：無限（スクロール）
- 背景：スーパーマーケットの床や通路をイメージ
- 端から落下判定あり

### アイテム（スピードアップ）
- 種類：食品アイテム（リンゴ、パン、牛乳など）
- 出現頻度：適度（2-4秒間隔）
- 効果：スピード+1、スコア+100
- 見た目：色鮮やかで分かりやすいアイコン

### 障害物
- 種類：他のショッピングカート、商品棚、段ボール箱など
- 出現頻度：適度（3-6秒間隔）
- 効果：スピード-1、0.5秒間の一時停止
- 見た目：灰色や暗い色で危険性を表現

---

## スコア・スピード仕様

### スピード
- 初期値：5
- 最小値：1（0になるとゲームオーバー）
- 最大値：15
- アイテム取得：+1
- 障害物接触：-1
- 時間経過による自然減速：10秒ごとに-1

### スコア
- アイテム取得：+100
- 距離ボーナス：1秒走行ごとに+10
- スピードボーナス：現在スピード × 5（毎秒加算）

---

## 画面構成

- **ヘッダー**
  - タイトル表示
  - 現在スコア表示
  - 現在スピード表示
- **メインビュー**
  - ゲームエリア（縦長のコース）
  - プレイヤー（ショッピングカート）
  - アイテムと障害物
- **フッター**
  - 操作説明
  - スタート/リスタートボタン
- **状態表示**
  - ゲーム中、ゲームオーバーなどの状態

---

## ゲームフロー

1. **初期状態**: タイトル画面、スタートボタン表示
2. **ゲーム開始**: カートが表示され、アイテムと障害物が生成開始
3. **ゲームプレイ**: 
   - プレイヤーが左右に移動
   - アイテム・障害物との当たり判定
   - スコア・スピードの更新
   - スピードによる画面スクロール速度変更
4. **ゲームオーバー条件**:
   - コース端からの落下
   - スピードが0になった場合
5. **結果表示**: 最終スコア表示、リスタートボタン

---

## 物理・当たり判定仕様

### 移動
- プレイヤーの左右移動：滑らかな移動
- 画面スクロール：スピードに比例した縦スクロール
- アイテム・障害物：プレイヤーに向かって移動（相対的に）

### 当たり判定
- プレイヤーとアイテム：矩形の重なり判定
- プレイヤーと障害物：矩形の重なり判定
- プレイヤーとコース端：X座標による判定

### アニメーション
- スムーズな移動アニメーション
- アイテム取得時のエフェクト
- 障害物接触時のエフェクト（点滅など）

---

## 拡張アイデア（将来的な実装）

- 複数のコース（スーパーマーケット、デパート、商店街など）
- パワーアップアイテム（無敵時間、マグネットなど）
- コンボシステム（連続でアイテムを取るとボーナス）
- 音効果（アイテム取得音、障害物接触音、BGMなど）
- ランキング機能（ローカル）

---

## テスト計画（E2E）

- プレイヤーの左右移動が正しく動作するか
- アイテムとの当たり判定が正確に動作するか
- 障害物との当たり判定が正確に動作するか
- スピードとスコアが正しく計算・表示されるか
- ゲームオーバー条件が適切に判定されるか
- リスタート機能が正常に動作するか
- モバイル端末でタッチ操作が正常に動作するか
- レスポンシブデザインが適切に動作するか