# 回転寿司キャッチャー – 仕様書

## 概要

「回転寿司キャッチャー」は、レーンを流れる寿司から注文通りの皿だけをタップでキャッチするカジュアルゲームです。  
集中力と素早い反応が求められ、間違えるとペナルティがあり、連続成功でコンボボーナスが得られます。

---

## ゲームのルール

1. 画面上部に「注文」として対象の寿司ネタが表示される
2. レーン（画面中央）を右から左に寿司皿が流れてくる
3. プレイヤーは注文通りの寿司皿をタップしてキャッチする
4. 正しい寿司をキャッチすると得点を獲得し、新しい注文が表示される
5. 間違った寿司をキャッチするか、正しい寿司を見逃すとペナルティ
6. 連続で正しい寿司をキャッチするとコンボボーナス
7. 制限時間内（60秒）でより多くの点数を稼ぐ

---

## 基本仕様

| 項目 | 内容 |
|------|------|
| タイトル | 回転寿司キャッチャー |
| プラットフォーム | Web（PC / モバイル対応） |
| 使用技術 | HTML / CSS / JavaScript（Reactなども可） |
| プレイ時間 | 60秒（1ゲームあたり） |
| UI構成 | 注文表示、レーン（寿司が流れる）、スコア表示、タイマー、スタート/リトライボタン |
| 寿司の種類 | まぐろ、サーモン、えび、たまご、いくら、うに（6種類） |

---

## スコア・ペナルティ仕様

### 基本スコア
- 正しい寿司キャッチ: 100点
- 連続成功ボーナス: 連続回数 × 20点
- 制限時間ボーナス: 残り時間 × 5点（ゲーム終了時）

### ペナルティ
- 間違った寿司キャッチ: -50点
- 正しい寿司の見逃し: -30点
- コンボリセット（連続回数が0に戻る）

### コンボシステム
- 連続成功回数に応じてボーナス点が増加
- 1回目: +0点, 2回目: +20点, 3回目: +40点, 4回目: +60点...
- 間違いまたは見逃しでコンボリセット

---

## 画面構成

- **ヘッダー**
  - タイトル表示
  - 残り時間表示（カウントダウン）
  - 現在スコア表示
  - コンボ数表示
- **注文エリア**
  - 現在の注文（寿司ネタ画像 + 名前）
  - 「注文: まぐろ」のような表示
- **レーンエリア**
  - 寿司皿が右から左に流れる
  - 複数の寿司が同時に流れることもある
  - タップ可能エリア
- **コントロール**
  - スタートボタン
  - リトライボタン（ゲーム終了時）
- **状態表示**
  - 現在の状態（「ゲーム開始前」「プレイ中」「ゲーム終了」）
  - 最終スコア（ゲーム終了時）

---

## ゲームフロー

1. **初期状態**: スタートボタンが表示される
2. **ゲーム開始**: 60秒のカウントダウン開始、最初の注文表示
3. **プレイ中**: 
   - 寿司が流れてくる
   - プレイヤーがタップでキャッチ
   - 正解/不正解の判定
   - 新しい注文生成
4. **ゲーム終了**: 時間切れでゲーム終了、最終スコア表示、リトライボタン表示

---

## 寿司・注文システム仕様

### 寿司の種類と見た目
| 寿司ネタ | 皿の色 | 表示名 |
|----------|--------|--------|
| まぐろ | 赤 | まぐろ |
| サーモン | オレンジ | サーモン |
| えび | ピンク | えび |
| たまご | 黄色 | たまご |
| いくら | 黒 | いくら |
| うに | 紫 | うに |

### 寿司の流れ
- 速度: 一定速度で右から左へ（約3秒で画面横断）
- 出現頻度: 1-2秒に1皿
- 種類: ランダムに選択（注文されているものが30%の確率で出現）
- 位置: レーン上をまっすぐ流れる

### 注文システム
- 初期: ランダムに1つの寿司を注文
- 成功時: 即座に新しい注文をランダム生成
- 失敗時: 注文は変わらず継続

---

## アニメーション・UI仕様

### 寿司皿のアニメーション
- 流れる速度: 一定（CSS transformまたはJSアニメーション）
- キャッチ時: 皿が光るエフェクト + 上に向かって消える
- 見逃し時: 皿がそのまま左端で消える

### フィードバック
- 正解: 「+100」などの得点表示 + 緑色のハイライト
- 不正解: 「-50」の減点表示 + 赤色のハイライト
- コンボ: 「コンボ×3」などの表示

### レスポンシブ対応
- モバイル: タッチ操作に最適化
- PC: マウスクリック対応
- 画面サイズに応じたレイアウト調整

---

## 技術仕様

### DOM構造
```html
<div id="game-container">
  <header>
    <div id="timer">時間: 60</div>
    <div id="score">スコア: 0</div>
    <div id="combo">コンボ: 0</div>
  </header>
  <div id="order-area">注文: まぐろ</div>
  <div id="lane-area">
    <!-- 寿司皿がここを流れる -->
  </div>
  <div id="controls">
    <button id="start-btn">スタート</button>
    <button id="retry-btn">リトライ</button>
  </div>
</div>
```

### ゲーム状態管理
- ゲーム状態: 'ready', 'playing', 'finished'
- スコア管理: 基本点 + コンボボーナス - ペナルティ
- タイマー管理: 60秒カウントダウン
- 寿司管理: 流れる寿司の生成・移動・削除

---

## 拡張アイデア（将来的な実装）

- 難易度選択（寿司の流れる速度調整）
- 特殊寿司（ボーナス点が高い、時間延長など）
- サウンドエフェクト（キャッチ音、BGM）
- ランキング機能（ローカルストレージ）
- アチーブメント（連続成功記録など）

---

## テスト計画（E2E）

- ゲーム開始・終了の流れが正常か
- 寿司が正しく流れて表示されるか
- タップでのキャッチ判定が正確か
- スコア計算（基本点、コンボ、ペナルティ）が正しいか
- タイマーが正常に動作するか
- 注文システムが正しく機能するか
- レスポンシブレイアウトが適切か